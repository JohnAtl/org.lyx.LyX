ruta_completa=$(realpath "$1")
ruta_tmp_sandbox="/tmp/"

if [[ "$ruta_completa" == "$ruta_tmp_sandbox"* ]]; then
	if ! [[ -f ~/.lyx/noShowMessage ]]; then
		result=$(zenity --warning \
                   --text="If you are having problems viewing the pdf, it may be because the "/tmp" folder is being used. If that is the case, try changing it from \"Tools->Preferences->Paths\" or grant permissions for this route. Trying to open: $ruta_completa" \
                   --extra-button="Don't show message again"\
                   --ok-label="Accept")

		if [[ "$result" == "Don't show message again" ]]; then
			touch ~/.lyx/noShowMessage
                fi
        fi
fi

echo " Running: xdg-open ${ruta_completa}"
exec xdg-open "$@"
